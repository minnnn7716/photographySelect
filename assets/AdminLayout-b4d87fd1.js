import{l as x,m,d as k,_ as v,r as i,o as b,c as g,a as e,n as l,w as a,f as c,F as f,g as N}from"./index-63aa369e.js";import{t as w}from"./toastStore-1d0482ec.js";import{C as $}from"./modalMixin-b8f36e48.js";import{P as y}from"./ProductModal-660c3eeb.js";import{T as M}from"./ToastMessages-53e41bc2.js";import"./adminProductStore-035dbbc5.js";import"./RatingScore-111242ea.js";const h=x("adminCollapseStore",{state:()=>({isShow:!1,collapse:""}),actions:{collapseInit(s){this.collapse=new $(s,{toggle:!1}),this.collapse.hide(),this.isShow=!1},toggleCollapse(){this.collapse.toggle(),this.isShow=!this.isShow},closeCollapse(){this.collapse.hide(),this.isShow=!1},routerPush(s){this.$router.push(s),this.closeCollapse()}}}),S={data(){return{isNew:!0,tempProduct:{},currentUrl:""}},components:{ProductModal:y},methods:{...m(h,["collapseInit","toggleCollapse","closeCollapse"]),openModal(){this.collapse.hide(),this.closeCollapse(),this.tempProduct={totalNum:1,soldNum:0,rate:"0",rateNum:0},this.$refs.productModal.showModal()},clickNavLink(s){this.currentUrl=s,this.routerPush(`/admin/${s}`)}},computed:{...k(h,["collapse","isShow"])},mounted(){const s=this.$route.path.split("/")[2];this.currentUrl=s,this.collapseInit(this.$refs.collapse)}},U=e("div",{class:"icon-list icon-list-light"},null,-1),L=[U],A={class:"collapse navbar-collapse",ref:"collapse"},P={class:"navbar-nav me-auto mb-2 mb-lg-0"},B={class:"nav-item border-bottom border-gray-400"},T={class:"nav-item border-bottom border-gray-400"},V={class:"nav-item border-bottom border-gray-400"},R={class:"nav-item border-bottom border-gray-400"},I={class:"nav-item"};function q(s,t,p,_,o,r){const d=i("ProductModal");return b(),g(f,null,[e("button",{type:"button",class:"d-lg-none btn px-1 px-lg-3 py-2 border-0",onClick:t[0]||(t[0]=(...n)=>s.toggleCollapse&&s.toggleCollapse(...n))},L),e("div",A,[e("ul",P,[e("li",B,[e("button",{type:"button",class:"nav-link pt-6 pb-4 text-white fw-light",onClick:t[1]||(t[1]=(...n)=>r.openModal&&r.openModal(...n))}," 新增商品 ")]),e("li",T,[e("a",{href:"#",class:l(["nav-link py-4 fw-light",{"text-primary":o.currentUrl==="products","text-white":o.currentUrl!=="products"}]),onClick:t[2]||(t[2]=a(n=>r.clickNavLink("products"),["prevent"]))},"商品列表",2)]),e("li",V,[e("a",{href:"#",class:l(["nav-link py-4 fw-light",{"text-primary":o.currentUrl==="orders","text-white":o.currentUrl!=="orders"}]),onClick:t[3]||(t[3]=a(n=>r.clickNavLink("orders"),["prevent"]))},"顧客訂單",2)]),e("li",R,[e("a",{href:"#",class:l(["nav-link py-4 fw-light",{"text-primary":o.currentUrl==="coupons","text-white":o.currentUrl!=="coupons"}]),onClick:t[4]||(t[4]=a(n=>r.clickNavLink("coupons"),["prevent"]))},"折價券",2)]),e("li",I,[e("a",{href:"#",class:l(["nav-link pt-4 fw-light",{"text-primary":o.currentUrl==="news","text-white":o.currentUrl!=="news"}]),onClick:t[5]||(t[5]=a(n=>r.clickNavLink("news"),["prevent"]))},"最新消息",2)])])],512),c(d,{ref:"productModal",product:o.tempProduct,isNew:o.isNew},null,8,["product","isNew"])],64)}const z=v(S,[["render",q]]);const E={components:{AdminCollapseList:z},methods:{...m(h,["closeCollapse"]),...m(w,["pushMsg"]),logout(){const s="https://vue3-course-api.hexschool.io/logout";this.$http.post(s).then(t=>{t.data.success&&(this.$router.push("/"),document.cookie=`psToken=;psExpired= ${new Date(0).toGMTString()}`,this.pushMsg({style:"success",title:"登出成功"}))}).catch(t=>{t.request.status===404&&this.pushMsg({style:"danger",title:"登出失敗",content:"出現系統問題"})})}},computed:{...k(h,["isShow"])}},F={class:"navbar navbar-dark bg-gray-800 fixed-top py-3 px-lg-8 px-lg-8"},D={class:"container-fluid"},G=e("h2",{class:"navbar-brand admin-navbar-brand"},"集攝 Photography Select",-1);function j(s,t,p,_,o,r){const d=i("RouterLink"),n=i("AdminCollapseList");return b(),g("nav",F,[e("div",D,[c(d,{to:"/",class:"d-inline-block img-hover-scale-sm"},{default:N(()=>[G]),_:1}),e("button",{type:"button",class:"d-none d-lg-inline-block btn font-sans-tw text-white",onClick:t[0]||(t[0]=(...u)=>r.logout&&r.logout(...u))}," 登出 "),c(n),e("div",{class:l(["collapse-backdrop",{fade:!s.isShow,show:s.isShow}]),onClick:t[1]||(t[1]=(...u)=>s.closeCollapse&&s.closeCollapse(...u))},null,2)])])}const H=v(E,[["render",j]]);const J={data(){return{isNew:!0,tempProduct:{},currentUrl:""}},components:{ProductModal:y},methods:{openModal(){this.tempProduct={totalNum:1,soldNum:0,rate:"0",rateNum:0},this.$refs.productModal.showModal()},clickNavLink(s){this.currentUrl=s,this.$router.push(`/admin/${s}`)}},mounted(){const s=this.$route.path.split("/")[2];this.currentUrl=s}},K={class:"d-none d-lg-block navbar adminSidebar navbar-expand-lg bg-light w-15 h-100vh position-fixed align-items-start pt-0"},O=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#adminSidebar"},[e("span",{class:"navbar-toggler-icon"})],-1),Q={class:"collapse navbar-collapse",id:"adminSidebar"},W={class:"navbar-nav flex-column flex-grow-1 text-center fs-5"},X={class:"nav-item border-bottom border-gray-400"};function Y(s,t,p,_,o,r){const d=i("ProductModal");return b(),g(f,null,[e("nav",K,[O,e("div",Q,[e("ul",W,[e("li",X,[e("button",{type:"button",class:"nav-link py-3 w-100",onClick:t[0]||(t[0]=(...n)=>r.openModal&&r.openModal(...n))}," 新增商品 ")]),e("li",{class:l(["nav-item border-bottom border-gray-400 cursor-pointer",{"text-black bg-primary-400":o.currentUrl==="products"}])},[e("a",{href:"#",class:"nav-link py-3",onClick:t[1]||(t[1]=a(n=>r.clickNavLink("products"),["prevent"]))}," 商品列表 ")],2),e("li",{class:l(["nav-item border-bottom border-gray-400 cursor-pointer",{"text-black bg-primary-400":o.currentUrl==="orders"}])},[e("a",{href:"#",class:"nav-link py-3",onClick:t[2]||(t[2]=a(n=>r.clickNavLink("orders"),["prevent"]))}," 顧客訂單 ")],2),e("li",{class:l(["nav-item border-bottom border-gray-400 cursor-pointer",{"text-black bg-primary-400":o.currentUrl==="coupons"}])},[e("a",{href:"#",class:"nav-link py-3",onClick:t[3]||(t[3]=a(n=>r.clickNavLink("coupons"),["prevent"]))}," 折價券 ")],2),e("li",{class:l(["nav-item border-bottom border-gray-400 cursor-pointer",{"text-black bg-primary-400":o.currentUrl==="news"}])},[e("a",{href:"#",class:"nav-link py-3",onClick:t[4]||(t[4]=a(n=>r.clickNavLink("news"),["prevent"]))}," 最新消息 ")],2)])])]),c(d,{ref:"productModal",product:o.tempProduct,isNew:o.isNew},null,8,["product","isNew"])],64)}const Z=v(J,[["render",Y]]);const tt={components:{AdminNavBar:H,AdminSideBar:Z,ToastMessages:M},methods:{...m(w,["pushMsg"])},created(){const s="https://vue3-course-api.hexschool.io/api/user/check",t=document.cookie.replace(/(?:(?:^|.*;\s*)psToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=`${t}`,this.$http.post(s).then(p=>{p.data.success||this.$router.push("/login")}).catch(p=>{p.request.status===404&&this.pushMsg({style:"danger",title:"後台載入失敗",content:"抱歉，出現系統問題，請聯絡我們！"})})}},et={class:"font-sans-tw"};function st(s,t,p,_,o,r){const d=i("AdminNavBar"),n=i("AdminSideBar"),u=i("ToastMessages"),C=i("RouterView");return b(),g("div",et,[c(d),c(n),c(u),c(C,{class:"adminView ms-auto"})])}const pt=v(tt,[["render",st]]);export{pt as default};
