import{l as h,p as a,q as i}from"./index-8558fa27.js";import{t as r}from"./toastStore-57ead6d4.js";const o=r(),l=h("newsStore",{state:()=>({news:{},top4News:{},pagination:{},singleNews:{tag:[]},otherNewsId:{prev:!1,next:!1},isLoading:!1}),actions:{getNews(e){const t=`https://vue3-course-api.hexschool.io/api/hexvuemm/articles?page=${e}`;this.isLoading=!0,a.get(t).then(s=>{this.news=s.data.articles,this.pagination=s.data.pagination,this.isLoading=!1,e&&(window.scrollTo({top:0,behavior:"smooth"}),i.push(`/news?page=${e}`))}).catch(()=>{o.pushMsg({style:"danger",title:"消息取得失敗"}),i.push("/notfound")})},getSingleNews(e){const t=`https://vue3-course-api.hexschool.io/api/hexvuemm/article/${e}`;this.isLoading=!0,a.get(t).then(s=>{s.data.success?(this.singleNews=s.data.article,this.getOtherNewsId(e)):i.push("/notfound")}).catch(()=>{o.pushMsg({style:"danger",title:"消息取得失敗"}),i.push("/notfound")})},getOtherNewsId(e){if(!Object.keys(this.news).length)return;const t=this.news.map(n=>n.id).indexOf(e),s=this.news.length;t!==-1&&(t+1===s?this.otherNewsId.next=!1:this.otherNewsId.next=this.news[t+1].id,t===0?this.otherNewsId.prev=!1:this.otherNewsId.prev=this.news[t-1].id,this.isLoading=!1)},getSingleNewsAll(e){const t="https://vue3-course-api.hexschool.io/api/hexvuemm/articles?page=:page";this.isLoading=!0,a.get(t).then(s=>{this.news=s.data.articles,this.getSingleNews(e)}).catch(()=>{o.pushMsg({style:"danger",title:"消息取得失敗"}),i.push("/notfound")})},getTop4News(){const e="https://vue3-course-api.hexschool.io/api/hexvuemm/articles?page=:page";this.isLoading=!0,a.get(e).then(t=>{this.top4News=t.data.articles.splice(0,4),this.pagination=t.data.pagination,this.isLoading=!1}).catch(()=>{o.pushMsg({style:"danger",title:"最新消息取得失敗",content:"抱歉，出現系統問題，請聯絡我們！"})})},routerPush(e){i.push(`/news/${e}`)}}}),c="/photographySelect/assets/icon-arrow-long-right-cd687db8.svg";export{c as _,l as n};
