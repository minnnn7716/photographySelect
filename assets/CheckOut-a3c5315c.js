import{_ as V,m as v,d as C,r as h,o as d,c as n,a as e,n as p,w as _,h as c,f as r,g as b,F as N,e as q,t as i,b as u,i as T,s as U}from"./index-63aa369e.js";import{c as k,p as S}from"./cartStore-8f2d0564.js";import{_ as I}from"./decoration-halo-70b29121.js";import"./toastStore-1d0482ec.js";const M={data(){return{orderData:{user:{name:"",tel:"",email:"",takeout:"",address:"",pay:"",bill:""},fare:0,message:""},tempCouponCode:"",tempAddress:""}},watch:{"orderData.user.takeout":"judgeTakeout",cartsData:"nothingInCart"},methods:{...v(k,["nothingInCart","getCart","updatedCart","deleteCart","nextStep","prevStep","changeStep","payOrder","laterPay","orderCart","useCoupon"]),...v(S,["routerPush"]),availableNum(t){const{totalNum:o,soldNum:y}=t.product;return o-y},sendCoupon(){this.useCoupon(this.tempCouponCode),this.tempCouponCode=""},judgeTakeout(){const{takeout:t}=this.orderData.user;t!=="宅配"&&(this.tempAddress=t)},sendOrderData(){this.orderData.user.address===""&&(this.orderData.user.address=this.tempAddress),this.nextStep()},completeCart(){let t="";this.orderData.user.pay==="信用卡"?t="pay":t="final",this.orderCart(this.orderData,t)}},computed:{...C(k,["cartsData","orderId","discountPrice","step","isPaid","couponData","couponCode","isLoading"])},created(){this.getCart()}},A={class:"overflow-hidden"},O={class:"container pt-2 pt-lg-8"},F={class:"d-flex align-items-center justify-content-between mb-2 mb-md-6 mb-lg-10"},P={class:"cartNav-item d-none d-lg-block"},L=e("h2",{class:"font-serif-en"},"Cart",-1),j=[L],E={class:"cartNav-item cartNav-sm-item"},B=e("h3",null,"填寫資料",-1),z=e("p",null,"1",-1),R=[B,z],G=e("li",{class:"cartNav-item"},[e("h3",null,"確認訂單")],-1),H={key:0,class:"cartNav-item"},J=e("h3",null,"結帳",-1),K=[J],Q=e("li",{class:"cartNav-item"},[e("h3",null,"完成訂單")],-1),W={class:"d-none d-lg-block"},X={class:"row font-sans-tw gx-md-4 gx-lg-10"},Y={key:0,class:"col-12 col-md-8 mb-6 mb-md-0"},Z={class:"col-12 col-lg-6 d-flex align-items-center"},$=e("label",{for:"name",class:"form-label me-4 mb-0 fs-6 fs-lg-5"},[u(" 姓名"),e("span",{class:"font-sans-tw fs-3 text-danger"},"*")],-1),ee={class:"col-12 col-lg-6 d-flex align-items-center"},se=e("label",{for:"tel",class:"form-label me-4 mb-0 fs-6 fs-md-5"},[u(" 電話"),e("span",{class:"font-sans-tw fs-3 text-danger"},"*")],-1),te={class:"col-12 d-flex align-items-center"},oe=e("label",{for:"email",class:"form-label me-4 mb-0 fs-6 fs-md-5"},[u(" 信箱"),e("span",{class:"font-sans-tw fs-3 text-danger"},"*")],-1),le={class:"col-12 d-flex align-items-center"},re=e("legend",{class:"form-label me-4 mb-0 fs-6 fs-md-5 w-auto"},[u(" 取貨"),e("span",{class:"font-sans-tw fs-3 text-danger"},"*")],-1),ae={class:"d-flex"},de={class:"form-check form-radio p-0 me-2 me-md-3 me-lg-4"},ne=e("label",{class:"form-check-label py-2 py-lg-3 px-3 px-md-4 px-lg-6 rounded-pill shadow-xs",for:"本店自取"}," 本店自取 ",-1),ie={class:"form-check form-radio p-0 me-2 me-md-3 me-lg-4"},ce=e("label",{class:"form-check-label py-2 py-lg-3 px-3 px-md-4 px-lg-6 rounded-pill shadow-xs",for:"宅配"}," 宅配 ",-1),me={class:"form-check form-radio p-0"},ue=e("label",{class:"form-check-label py-2 py-lg-3 px-3 px-md-4 px-lg-6 rounded-pill shadow-xs",for:"超商取貨"}," 超商取貨 ",-1),pe={key:0,class:"col-12 d-flex align-items-center"},fe=e("label",{for:"address",class:"form-label me-4 mb-0 fs-6 fs-md-5"},"地址",-1),he={class:"col-12 d-flex align-items-center"},_e=e("legend",{class:"form-label me-4 mb-0 fs-6 fs-md-5 w-auto"},[u(" 付款"),e("span",{class:"font-sans-tw fs-3 text-danger"},"*")],-1),ge={class:"d-flex"},be={class:"form-check form-radio p-0 me-2 me-md-3 me-lg-4"},ye=e("label",{class:"form-check-label py-2 py-lg-3 px-2 px-md-4 px-lg-6 rounded-pill shadow-xs",for:"ATM 匯款"}," ATM 匯款 ",-1),xe={class:"form-check form-radio p-0 me-2 me-md-3 me-lg-4"},ve=e("label",{class:"form-check-label py-2 py-lg-3 px-3 px-md-4 px-lg-6 rounded-pill shadow-xs",for:"信用卡"}," 信用卡 ",-1),ke={class:"form-check form-radio p-0"},we=e("label",{class:"form-check-label py-2 py-lg-3 px-2 px-md-4 px-lg-6 rounded-pill shadow-xs",for:"貨到付款"}," 貨到付款 ",-1),De={class:"col-12 d-flex align-items-center mb-2"},Ve=e("legend",{class:"form-label me-4 mb-0 fs-6 fs-md-5 w-auto"},[u(" 發票"),e("span",{class:"font-sans-tw fs-3 text-danger"},"*")],-1),Ce={class:"d-flex flex-fit"},Ne={class:"form-check form-radio p-0 me-2 me-md-3 me-lg-4"},qe=e("label",{class:"form-check-label py-2 py-lg-3 px-3 px-md-4 px-lg-6 rounded-pill shadow-xs",for:"紙本發票"}," 紙本發票 ",-1),Te={class:"form-check form-radio p-0 me-2 me-md-3 me-lg-4"},Ue=e("label",{class:"form-check-label py-2 py-lg-3 px-3 px-md-4 px-lg-6 rounded-pill shadow-xs",for:"電子載具"}," 電子載具 ",-1),Se={key:0},Ie={key:0,class:"mt-2"},Me={class:"d-flex"},Ae=e("label",{for:"memo",class:"form-label me-4 mb-0 fs-6 fs-md-5"},"備註",-1),Oe={key:1,class:"col-12 col-md-8 mb-6 mb-md-0"},Fe={class:"mb-6"},Pe=e("h3",{class:"fs-5 fw-normal text-primary-700 bg-white d-inline-block py-2 px-4 rounded-top-3"}," 購物明細 ",-1),Le={class:"bg-white px-3 pt-3 pb-1"},je={class:"table-responsive"},Ee={class:"checkout-table table align-middle"},Be=e("thead",null,[e("tr",null,[e("th",{class:"fs-normal-1 text-gray-500 fw-light border-bottom-0 pb-0"},"品名"),e("th",{class:"fs-normal-1 text-gray-500 fw-light text-center text-md-end border-bottom-0 pb-0"}," 單價 "),e("th",{class:"fs-normal-1 text-gray-500 fw-light text-center text-md-end border-bottom-0 pb-0"}," 數量 "),e("th",{class:"fs-normal-1 text-gray-500 fw-light text-center text-md-end border-bottom-0 pb-0"}," 總額 ")])],-1),ze={class:"fw-light"},Re={class:"text-end"},Ge={class:"text-center text-md-end"},He={class:"text-end"},Je=e("h3",{class:"fs-5 fw-normal text-primary-700 bg-white d-inline-block py-2 px-4 rounded-top-3"}," 寄送資訊 ",-1),Ke={class:"container"},Qe={class:"fw-light row bg-white py-3 px-3"},We={class:"col-12 col-md-6 py-4 d-flex border-bottom border-gray-400"},Xe=e("p",{class:"me-6 text-gray-500"},"姓名",-1),Ye={class:"flex-grow-1"},Ze={class:"col-12 col-md-6 py-4 d-flex border-bottom border-gray-400"},$e=e("p",{class:"me-6 text-gray-500"},"電話",-1),es={class:"flex-grow-1"},ss={class:"col-12 py-4 d-flex border-bottom border-gray-400"},ts=e("p",{class:"me-6 text-gray-500"},"信箱",-1),os={class:"flex-grow-1"},ls={class:"col-12 col-md-6 py-4 d-flex border-bottom border-gray-400"},rs=e("p",{class:"me-6 text-gray-500"},"取貨",-1),as={class:"flex-grow-1"},ds={class:"col-12 col-md-6 py-4 d-flex border-bottom border-gray-400"},ns=e("p",{class:"me-6 text-gray-500"},"付款",-1),is={class:"flex-grow-1"},cs={key:0,class:"col-12 py-4 d-flex border-bottom border-gray-400"},ms=e("p",{class:"me-6 text-gray-500"},"地址",-1),us={class:"flex-grow-1"},ps={class:"col-12 py-4 d-flex border-bottom border-gray-400"},fs=e("p",{class:"me-6 text-gray-500"},"發票",-1),hs={class:"flex-grow-1"},_s={key:0},gs={class:"col-12 py-4 d-flex"},bs=e("p",{class:"me-6 text-gray-500"},"備註",-1),ys={class:"flex-grow-1"},xs={key:2,class:"col-12 col-md-4"},vs={class:"card border-gray-800"},ks=e("div",{class:"card-header bg-gray-800"},[e("h4",{class:"text-center text-white fs-5 fs-lg-4 fw-normal"},"總計")],-1),ws={class:"card-body fw-light"},Ds={class:"list-unstyled fs-6 fs-lg-5 border-bottom border-gray-400 mb-0"},Vs={class:"d-flex align-items-center justify-content-between mb-4"},Cs=e("h5",{class:"fs-6 fs-lg-5 fw-light"},"商品總數",-1),Ns={class:"d-flex align-items-center justify-content-between mb-4"},qs=e("h5",{class:"fs-6 fs-lg-5 fw-light"},"小計",-1),Ts={key:0,class:"d-flex align-items-center justify-content-between mb-4 text-primary-700 fw-normal"},Us=e("h5",{class:"fs-6 fs-lg-5"},"折價券",-1),Ss={class:"fs-3 fs-lg-2 fw-light text-center pt-4 pb-2 pt-lg-5 pb-lg-3"},Is={key:1,type:"submit",form:"cartForm",class:"fs-5 fs-lg-4 btn btn-primary-400 fw-light rounded-0 rounded-bottom py-3"},Ms={key:3,class:"d-flex flex-column"},As={class:"text-center"},Os={key:4,class:"d-flex flex-column mt-6 mt-md-0 text-center"},Fs=e("div",{class:"font-serif-en mb-6 mb-md-10 position-relative"},[e("h2",{class:"checkout-final-title fs-display-7 fs-lg-display-1"},"Thank you"),e("img",{class:"position-absolute top-50 start-50 translate-middle z-minus-1",src:I,alt:"decoration-halo"})],-1),Ps={class:"font-sans-tw fw-light fs-6 fs-md-4 mb-12"},Ls=e("p",null,[u("感謝您的購買，"),e("br",{class:"d-md-none"}),u("您可以透過 Email 查詢訂單。")],-1),js={key:0,class:"mt-4"},Es={key:1,class:"mt-4 lh-base"},Bs=e("br",{class:"d-none d-md-block"},null,-1),zs={class:"text-center"};function Rs(t,o,y,Gs,s,g){const m=h("VField"),f=h("ErrorMessage"),w=h("VForm"),x=h("RouterLink"),D=h("LoadingOverlay");return d(),n("div",A,[e("div",O,[e("div",F,[e("ul",{class:p(["list-unstyled cartNav d-flex align-items-center font-sans-tw",{step1:t.step===1,step2:t.step===2,pay:t.step==="pay",final:t.step==="final"}])},[e("li",P,[e("a",{onClick:o[0]||(o[0]=_(a=>t.changeStep("cart"),["prevent"])),class:p(["link-black d-flex align-items-end",{"cursor-pointer":t.step<=2||t.step>0}])},j,2)]),e("li",E,[e("a",{class:p(["link-black d-flex align-items-end",{"cursor-pointer":t.step<=2||t.step>0}]),onClick:o[1]||(o[1]=_(a=>t.changeStep(1),["prevent"]))},R,2)]),G,this.orderData.user.pay==="信用卡"?(d(),n("li",H,K)):c("",!0),Q],2),e("div",W,[t.step<=2?(d(),n("a",{key:0,onClick:o[2]||(o[2]=_((...a)=>t.prevStep&&t.prevStep(...a),["prevent"])),class:"d btn-custom-light cursor-pointer"},"上一步")):c("",!0)])]),e("div",X,[t.step===1?(d(),n("div",Y,[r(w,{onSubmit:g.sendOrderData,id:"cartForm",class:"row gx-lg-10 gy-6 gy-lg-10"},{default:b(({errors:a})=>[e("div",Z,[$,e("div",{class:p(["flex-fit normalInput",{error:a.姓名}])},[r(m,{type:"text",id:"name",name:"姓名",rules:"required",class:"form-control py-2 py-lg-3 rounded-3 shadow-xs",modelValue:s.orderData.user.name,"onUpdate:modelValue":o[3]||(o[3]=l=>s.orderData.user.name=l)},null,8,["modelValue"]),r(f,{name:"姓名",class:"error-text position-absolute fs-normal-1 fs-lg-6 text-danger mt-lg-1"})],2)]),e("div",ee,[se,e("div",{class:p(["flex-fit normalInput",{error:a.電話}])},[r(m,{type:"tel",id:"tel",name:"電話",rules:"required|length:10",class:"form-control flex-fit py-2 py-lg-3 rounded-3 shadow-xs",modelValue:s.orderData.user.tel,"onUpdate:modelValue":o[4]||(o[4]=l=>s.orderData.user.tel=l),placeholder:"不含 - 符號的手機或室話"},null,8,["modelValue"]),r(f,{name:"電話",class:"error-text position-absolute fs-normal-1 fs-lg-6 text-danger mt-lg-1"})],2)]),e("div",te,[oe,e("div",{class:p(["flex-fit normalInput",{error:a.信箱}])},[r(m,{type:"email",id:"email",name:"信箱",rules:"email|required",class:"form-control flex-fit py-2 py-lg-3 rounded-3 shadow-xs",modelValue:s.orderData.user.email,"onUpdate:modelValue":o[5]||(o[5]=l=>s.orderData.user.email=l)},null,8,["modelValue"]),r(f,{name:"信箱",class:"error-text position-absolute fs-normal-1 fs-lg-6 text-danger mt-lg-1"})],2)]),e("fieldset",le,[re,e("div",{class:p(["normalInput",{error:a.取貨方式}])},[e("div",ae,[e("div",de,[r(m,{class:"form-check-input d-none",type:"radio",name:"取貨方式",rules:"required",id:"本店自取",value:"本店自取",modelValue:s.orderData.user.takeout,"onUpdate:modelValue":o[6]||(o[6]=l=>s.orderData.user.takeout=l)},null,8,["modelValue"]),ne]),e("div",ie,[r(m,{class:"form-check-input d-none",type:"radio",name:"取貨方式",rules:"required",id:"宅配",value:"宅配",modelValue:s.orderData.user.takeout,"onUpdate:modelValue":o[7]||(o[7]=l=>s.orderData.user.takeout=l)},null,8,["modelValue"]),ce]),e("div",me,[r(m,{class:"form-check-input d-none",type:"radio",name:"取貨方式",rules:"required",id:"超商取貨",value:"超商取貨",modelValue:s.orderData.user.takeout,"onUpdate:modelValue":o[8]||(o[8]=l=>s.orderData.user.takeout=l)},null,8,["modelValue"]),ue])]),r(f,{name:"取貨方式",class:"error-text position-absolute fs-normal-1 fs-lg-6 text-danger mt-lg-1"})],2)]),s.orderData.user.takeout==="宅配"?(d(),n("div",pe,[fe,e("div",{class:p(["flex-fit normalInput",{error:a.地址}])},[r(m,{type:"text",id:"address",name:"地址",class:"form-control flex-fit py-2 py-lg-3 rounded-3 shadow-xs",rules:"required",modelValue:s.orderData.user.address,"onUpdate:modelValue":o[9]||(o[9]=l=>s.orderData.user.address=l)},null,8,["modelValue"]),r(f,{name:"地址",class:"error-text position-absolute fs-normal-1 fs-lg-6 text-danger mt-lg-1"})],2)])):c("",!0),e("fieldset",he,[_e,e("div",{class:p(["normalInput",{error:a.付款方式}])},[e("div",ge,[e("div",be,[r(m,{class:"form-check-input d-none",type:"radio",name:"付款方式",rules:"required",id:"ATM 匯款",value:"ATM 匯款",modelValue:s.orderData.user.pay,"onUpdate:modelValue":o[10]||(o[10]=l=>s.orderData.user.pay=l)},null,8,["modelValue"]),ye]),e("div",xe,[r(m,{class:"form-check-input d-none",type:"radio",name:"付款方式",rules:"required",id:"信用卡",value:"信用卡",modelValue:s.orderData.user.pay,"onUpdate:modelValue":o[11]||(o[11]=l=>s.orderData.user.pay=l)},null,8,["modelValue"]),ve]),e("div",ke,[r(m,{class:"form-check-input d-none",type:"radio",name:"付款方式",rules:"required",id:"貨到付款",value:"貨到付款",modelValue:s.orderData.user.pay,"onUpdate:modelValue":o[12]||(o[12]=l=>s.orderData.user.pay=l)},null,8,["modelValue"]),we])]),r(f,{name:"付款方式",class:"error-text position-absolute fs-normal-1 fs-lg-6 text-danger mt-lg-1"})],2)]),e("fieldset",De,[Ve,e("div",{class:p(["normalInput flex-fit",{error:a.發票類型}])},[e("div",Ce,[e("div",Ne,[r(m,{class:"form-check-input d-none",type:"radio",name:"發票類型",id:"紙本發票",value:"紙本發票",rules:"required",modelValue:s.orderData.user.bill,"onUpdate:modelValue":o[13]||(o[13]=l=>s.orderData.user.bill=l)},null,8,["modelValue"]),qe]),e("div",Te,[r(m,{class:"form-check-input d-none",type:"radio",name:"發票類型",id:"電子載具",value:"電子載具",rules:"required",modelValue:s.orderData.user.bill,"onUpdate:modelValue":o[14]||(o[14]=l=>s.orderData.user.bill=l)},null,8,["modelValue"]),Ue]),e("div",{class:p(["flex-fit normalInput d-none d-lg-block",{error:a.電子載具}])},[s.orderData.user.bill==="電子載具"?(d(),n("div",Se,[r(m,{type:"text",name:"電子載具",class:"form-control w-100 py-2 py-lg-3 rounded-3 shadow-xs",placeholder:"請輸入  '/'  開頭的載具號碼",rules:"required",modelValue:s.orderData.user.billNum,"onUpdate:modelValue":o[15]||(o[15]=l=>s.orderData.user.billNum=l)},null,8,["modelValue"])])):c("",!0),r(f,{name:"電子載具",class:"error-text position-absolute fs-normal-1 fs-lg-6 text-danger mt-lg-1"})],2)]),e("div",{class:p(["normalInput d-lg-none",{error:a.電子載具}])},[s.orderData.user.bill==="電子載具"?(d(),n("div",Ie,[r(m,{type:"text",name:"電子載具",class:"form-control w-100 py-2 py-lg-3 rounded-3 shadow-xs",placeholder:"請輸入  '/'  開頭的載具號碼",rules:"required",modelValue:s.orderData.user.billNum,"onUpdate:modelValue":o[16]||(o[16]=l=>s.orderData.user.billNum=l)},null,8,["modelValue"])])):c("",!0),r(f,{name:"電子載具",class:"error-text position-absolute fs-normal-1 fs-lg-6 text-danger mt-lg-1"})],2),r(f,{name:"發票類型",class:"error-text position-absolute fs-normal-1 fs-lg-6 text-danger mt-lg-1"})],2)]),e("div",Me,[Ae,T(e("textarea",{class:"form-control flex-fit py-2 py-lg-3 rounded-3 shadow-xs",id:"memo",rows:"3","onUpdate:modelValue":o[17]||(o[17]=l=>s.orderData.message=l)},null,512),[[U,s.orderData.message]])])]),_:1},8,["onSubmit"])])):c("",!0),t.step===2?(d(),n("div",Oe,[e("div",Fe,[Pe,e("div",Le,[e("div",je,[e("table",Ee,[Be,e("tbody",ze,[(d(!0),n(N,null,q(t.cartsData.carts,a=>(d(),n("tr",{key:`確認訂單${a.product.title}`},[e("td",null,i(a.product.title),1),e("td",Re,"NT$ "+i(t.$filters.currency(a.product.price)),1),e("td",Ge,i(a.qty),1),e("td",He,"NT$ "+i(t.$filters.currency(a.total)),1)]))),128))])])])])]),e("div",null,[Je,e("div",Ke,[e("div",Qe,[e("div",We,[Xe,e("p",Ye,i(s.orderData.user.name),1)]),e("div",Ze,[$e,e("p",es,i(s.orderData.user.tel),1)]),e("div",ss,[ts,e("p",os,i(s.orderData.user.email),1)]),e("div",ls,[rs,e("p",as,i(s.orderData.user.takeout),1)]),e("div",ds,[ns,e("p",is,i(s.orderData.user.pay),1)]),s.orderData.user.takeout==="宅配"?(d(),n("div",cs,[ms,e("p",us,i(s.orderData.user.address),1)])):c("",!0),e("div",ps,[fs,e("p",hs,[u(i(s.orderData.user.bill)+" ",1),s.orderData.user.bill==="電子載具"?(d(),n("span",_s,i(s.orderData.user.billNum),1)):c("",!0)])]),e("div",gs,[bs,e("p",ys,i(s.orderData.message),1)])])])])])):c("",!0),t.step<=2?(d(),n("div",xs,[e("div",vs,[ks,e("div",ws,[e("ul",Ds,[e("li",Vs,[Cs,e("p",null,i(t.cartsData.totalNum)+" 項",1)]),e("li",Ns,[qs,e("p",null,"NT$ "+i(t.$filters.currency(t.cartsData.total)),1)]),t.couponCode!==""?(d(),n("li",Ts,[Us,e("p",null,"-NT$ "+i(t.$filters.currency(t.discountPrice)),1)])):c("",!0)]),e("h4",Ss," NT$ "+i(t.$filters.currency(Math.floor(Math.floor(t.cartsData.final_total)))),1)]),t.step===2?(d(),n("button",{key:0,type:"button",onClick:o[18]||(o[18]=(...a)=>g.completeCart&&g.completeCart(...a)),class:"fs-5 fs-lg-4 btn btn-primary-400 fw-light rounded-0 rounded-bottom py-3"},i(this.orderData.user.pay==="信用卡"?"前往付款":"完成訂單"),1)):(d(),n("button",Is," 下一步 "))])])):c("",!0),t.step==="pay"?(d(),n("div",Ms,[e("div",As,[e("a",{onClick:o[19]||(o[19]=_((...a)=>t.payOrder&&t.payOrder(...a),["prevent"])),class:"btn-custom-light me-3 cursor-pointer"},"結帳"),e("a",{onClick:o[20]||(o[20]=_((...a)=>t.laterPay&&t.laterPay(...a),["prevent"])),class:"btn-custom-dark me-3 cursor-pointer"},"稍後付款")])])):c("",!0),t.step==="final"?(d(),n("div",Os,[Fs,e("div",Ps,[Ls,s.orderData.user.pay==="信用卡"&&!t.isPaid?(d(),n("p",js," 尚未結帳的訂單，請於隔日 23:59 前付款完成，超過時限將取消訂單。 ")):c("",!0),s.orderData.user.pay==="ATM 匯款"?(d(),n("p",Es,[u(" 請匯款至 (013) 0000-0000-0000-0000，匯款完成請來信告知時間與後五碼，"),Bs,u(" 尚未結帳的訂單，請於隔日 23:59 前付款完成，超過時限將取消訂單。 ")])):c("",!0)]),e("div",zs,[r(x,{to:"/order",class:"btn-custom-light me-3"},{default:b(()=>[u("查詢訂單")]),_:1}),r(x,{to:"/products",class:"btn-custom-dark me-3"},{default:b(()=>[u("再來逛逛")]),_:1})])])):c("",!0)]),r(D,{active:t.isLoading},null,8,["active"])])])}const Ws=V(M,[["render",Rs]]);export{Ws as default};
