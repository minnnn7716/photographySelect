import{l as h,p as a,q as i}from"./index-75005144.js";import{t as r}from"./toastStore-24da0ea0.js";const o=r(),l=h("newsStore",{state:()=>({news:{},top4News:{},pagination:{},singleNews:{tag:[]},otherNewsId:{prev:!1,next:!1},isLoading:!1}),actions:{getNews(s){const t=`https://vue3-course-api.hexschool.io/api/hexvuemm/articles?page=${s}`;this.isLoading=!0,a.get(t).then(e=>{this.news=e.data.articles,this.pagination=e.data.pagination,this.isLoading=!1,s&&(window.scrollTo({top:0,behavior:"smooth"}),i.push(`/news?page=${s}`))}).catch(e=>{e.request.status===404&&(o.pushMsg({style:"danger",title:"消息取得失敗"}),i.push("/notfound"))})},getSingleNews(s){const t=`https://vue3-course-api.hexschool.io/api/hexvuemm/article/${s}`;this.isLoading=!0,a.get(t).then(e=>{e.data.success?(this.singleNews=e.data.article,this.getOtherNewsId(s)):i.push("/notfound")}).catch(e=>{e.request.status===404&&(o.pushMsg({style:"danger",title:"消息取得失敗"}),i.push("/notfound"))})},getOtherNewsId(s){if(!Object.keys(this.news).length)return;const t=this.news.map(n=>n.id).indexOf(s),e=this.news.length;t!==-1&&(t+1===e?this.otherNewsId.next=!1:this.otherNewsId.next=this.news[t+1].id,t===0?this.otherNewsId.prev=!1:this.otherNewsId.prev=this.news[t-1].id,this.isLoading=!1)},getSingleNewsAll(s){const t="https://vue3-course-api.hexschool.io/api/hexvuemm/articles?page=:page";this.isLoading=!0,a.get(t).then(e=>{this.news=e.data.articles,this.getSingleNews(s)}).catch(e=>{e.request.status===404&&(o.pushMsg({style:"danger",title:"消息取得失敗"}),i.push("/notfound"))})},getTop4News(){const s="https://vue3-course-api.hexschool.io/api/hexvuemm/articles?page=:page";this.isLoading=!0,a.get(s).then(t=>{this.top4News=t.data.articles.splice(0,4),this.pagination=t.data.pagination,this.isLoading=!1}).catch(t=>{t.request.status===404&&o.pushMsg({style:"danger",title:"最新消息取得失敗",content:"抱歉，出現系統問題，請聯絡我們！"})})},routerPush(s){i.push(`/news/${s}`)}}}),u="/photographySelect/assets/icon-arrow-long-right-cd687db8.svg";export{u as _,l as n};
