import{_ as v,m as k,d as C,r as f,o as l,c as r,a as t,t as o,f as g,g as O,h as c,F as b,e as m,b as d,n as $}from"./index-90c93330.js";import{o as y}from"./orderStore-2ec7c846.js";import{o as N}from"./orderMixin-3db2fe2f.js";import"./toastStore-fa35cab5.js";const L={data(){return{onClick:!1,discountPrice:0}},props:{id:{type:String,default:""}},mixins:[N],methods:{...k(y,["getUserOrders","payOrder","dueDate","isCancel"]),changStatus(s){this.onClick=this.onClick===s?!1:s,this.calcDiscountPrice()},calcDiscountPrice(){let s=0;this.onClick!==!1&&this.products.length&&(s=this.products.map(n=>n.total).reduce((n,p)=>n+p)-Math.floor(this.userOrders[this.onClick].total)),this.discountPrice=s}},computed:{...C(y,["userOrders","isLoading"]),products(){const s=[];return this.onClick===!1||Object.keys(this.userOrders[this.onClick].products).forEach(n=>{s.push(this.userOrders[this.onClick].products[n])}),s}},created(){this.getUserOrders(this.id)}},S={class:"container pt-2 pt-md-8 order"},T={class:"d-flex justify-content-between align-items-center mb-8 mb-md-12"},D={class:"d-flex flex-column flex-md-row align-items-md-center"},V=t("h2",{class:"fs-2 fs-md-1 font-serif-en"},"Check Order",-1),j=t("span",{style:{width:"40px",height:"1px"},class:"d-none d-md-inline-block bg-gray-800 mx-3"},null,-1),P={class:"fs-6 fs-md-4 font-sans-tw fw-light"},A={class:"table-responsive"},B={class:"table table-custom table-custom-hover align-middle font-sans-tw fs-6 fs-lg-5 mb-6 mb-lg-12"},E={key:0},F=t("tr",null,[t("th",{scope:"col",class:"fw-normal d-none d-lg-table-cell"},"訂單編號"),t("th",{scope:"col",class:"fw-normal text-center text-lg-start"},"訂購日期"),t("th",{scope:"col",class:"fw-normal text-center text-lg-start"},"總金額"),t("th",{scope:"col",class:"fw-normal text-center text-lg-start"},[d(" 付款"),t("span",{class:"d-none d-lg-inline"},"狀態")]),t("th",{scope:"col",class:"fw-normal"},[t("span",{class:"d-none"},"展開訂單")])],-1),M=[F],R=["onClick"],U={scope:"row",class:"active-td d-none d-lg-table-cell"},q={class:"active-td text-center text-lg-start"},z={class:"active-td text-center text-lg-start"},G={class:"active-td text-center text-lg-start"},H={key:0},J={key:1,class:"text-gray-700"},K={key:2,class:"text-danger fw-medium"},Q=t("td",{class:"active-td text-end"},[t("button",{type:"button",class:"btn p-2 border-0"},[t("div",{class:"icon-plus"})])],-1),W={key:0,class:"table-custom-activeList bg-white"},X={colspan:"5"},Y={key:0,class:"d-flex ps-lg-2 align-items-center justify-content-between justify-content-lg-start my-4"},Z={class:"text-danger fw-medium"},I=t("br",{class:"d-lg-none"},null,-1),tt=["onClick"],st={class:"d-flex d-lg-none justify-content-between align-items-center mt-2 mb-8"},et=t("h3",{class:"fs-5 fw-normal ps-0 ps-lg-2"},"訂單編號",-1),ot=t("h3",{class:"fs-5 fw-normal ps-0 ps-lg-2"},"訂單明細",-1),lt={class:"table align-middle table-responsive"},rt=t("thead",null,[t("tr",null,[t("th",{class:"fs-normal-1 text-gray-500 fw-light border-bottom-0 pb-0"},"品名"),t("th",{class:"fs-normal-1 text-gray-500 fw-light text-end border-bottom-0 pb-0"}," 單價 "),t("th",{class:"fs-normal-1 text-gray-500 fw-light text-end border-bottom-0 pb-0"}," 數量 "),t("th",{class:"fs-normal-1 text-gray-500 fw-light text-end border-bottom-0 pb-0"}," 總額 ")])],-1),ct={class:"fw-light"},nt={class:"text-end"},at={class:"text-end"},dt={class:"text-end"},it={class:"text-end"},_t=t("tr",null,[t("td",{colspan:"3",class:"border-bottom-0"},"運費"),t("td",{class:"border-bottom-0"},"NT$ 60")],-1),ht={key:0},pt={colspan:"3",class:"border-bottom-0"},ut={class:"fs-normal-1 text-gray"},ft={class:"border-bottom-0"},gt={colspan:"4",class:"fs-5 border-bottom-0"},bt={class:"fs-3"},mt=t("h3",{class:"fs-5 fw-normal ps-0 ps-lg-2"},"寄送資訊",-1),yt={class:"container"},xt={class:"fw-light row"},wt={class:"col-6 py-4 d-flex border-bottom border-gray-400"},vt=t("p",{class:"me-6 text-gray-500"},"姓名",-1),kt={class:"flex-grow-1"},Ct={class:"col-6 py-4 d-flex border-bottom border-gray-400"},Ot=t("p",{class:"me-6 text-gray-500"},"電話",-1),$t={class:"flex-grow-1"},Nt={class:"col-12 py-4 d-flex border-bottom border-gray-400"},Lt=t("p",{class:"me-6 text-gray-500"},"信箱",-1),St={class:"flex-grow-1"},Tt={class:"col-6 py-4 d-flex border-bottom border-gray-400"},Dt=t("p",{class:"me-6 text-gray-500"},"取貨",-1),Vt={class:"flex-grow-1"},jt={class:"col-6 py-4 d-flex border-bottom border-gray-400"},Pt=t("p",{class:"me-6 text-gray-500"},"付款",-1),At={class:"flex-grow-1"},Bt={class:"col-12 py-4 d-flex border-bottom border-gray-400"},Et=t("p",{class:"me-6 text-gray-500"},"地址",-1),Ft={class:"flex-grow-1"},Mt={class:"col-12 py-4 d-flex border-bottom border-gray-400"},Rt=t("p",{class:"me-6 text-gray-500"},"發票",-1),Ut={class:"flex-grow-1"},qt={key:0},zt={class:"col-12 py-4 d-flex"},Gt=t("p",{class:"me-6 text-gray-500"},"備註",-1),Ht={class:"flex-grow-1"};function Jt(s,h,n,p,i,u){const x=f("RouterLink"),w=f("LoadingOverlay");return l(),r("div",S,[t("div",T,[t("div",D,[V,j,t("p",P,o(s.userOrders[0].user.name)+"｜共 "+o(s.userOrders.length)+" 筆訂單 ",1)]),g(x,{to:"/order",class:"btn-custom-light me-0 me-lg-3 flex-inherit"},{default:O(()=>[d("返回查詢")]),_:1})]),t("div",A,[t("table",B,[i.onClick!==0?(l(),r("thead",E,M)):c("",!0),(l(!0),r(b,null,m(s.userOrders,(e,_)=>(l(),r("tbody",{class:"fs-normal-1 fs-lg-5",onClick:a=>u.changStatus(_),key:`userOrder ${e.id}`},[t("tr",{class:$({"table-custom-active":_===i.onClick})},[t("td",U,[t("p",null,"#"+o(_+1)+" ｜ "+o(e.id),1)]),t("td",q,[t("p",null,o(s.$filters.date(e.create_at)),1)]),t("td",z,[t("p",null,"NT$ "+o(s.$filters.currency(e.total)),1)]),t("td",G,[t("p",null,[e.is_paid?(l(),r("span",H,"已付款")):c("",!0),s.isCancel(e.create_at)?(l(),r("span",J,"已取消")):c("",!0),!e.is_paid&&!s.isCancel(e.create_at)?(l(),r("span",K,"未付款")):c("",!0)])]),Q],2),_===i.onClick?(l(),r("tr",W,[t("td",X,[t("div",null,[e.is_paid?c("",!0):(l(),r("div",Y,[t("p",Z,[d(" 尚未付款｜"),I,d("期限至 "+o(`${s.dueDate(e.create_at).toLocaleDateString()} 23:59`),1)]),e.is_paid?c("",!0):(l(),r("button",{key:0,type:"button",class:"btn btn-danger fs-normal-1 fs-lg-6 py-1 ms-2",onClick:a=>s.payOrder(e.id,n.id)}," 前往付款 ",8,tt))])),t("div",st,[et,t("p",null,o(e.id),1)]),ot,t("table",lt,[rt,t("tbody",ct,[(l(!0),r(b,null,m(u.products,a=>(l(),r("tr",{key:`product ${a}`},[t("td",null,o(a.product.title),1),t("td",nt,"NT$ "+o(s.$filters.currency(a.product.price)),1),t("td",at,o(a.qty),1),t("td",dt,"NT$ "+o(s.$filters.currency(a.total)),1)]))),128))]),t("tfoot",it,[_t,s.coupon.title!==""?(l(),r("tr",ht,[t("td",pt,[d(" 折價卷 "),t("p",ut,o(s.coupon.title),1)]),t("td",ft,"- NT$ "+o(s.$filters.currency(i.discountPrice)),1)])):c("",!0),t("tr",null,[t("td",gt,[d(" NT$ "),t("span",bt,o(s.$filters.currency(e.total)),1)])])])])]),mt,t("div",yt,[t("div",xt,[t("div",wt,[vt,t("p",kt,o(e.user.name),1)]),t("div",Ct,[Ot,t("p",$t,o(e.user.tel),1)]),t("div",Nt,[Lt,t("p",St,o(e.user.email),1)]),t("div",Tt,[Dt,t("p",Vt,o(e.user.takeout),1)]),t("div",jt,[Pt,t("p",At,o(e.user.pay),1)]),t("div",Bt,[Et,t("p",Ft,o(e.user.address),1)]),t("div",Mt,[Rt,t("p",Ut,[d(o(e.user.bill)+" ",1),e.user.bill==="電子載具"?(l(),r("span",qt,o(e.user.billNum),1)):c("",!0)])]),t("div",zt,[Gt,t("p",Ht,o(e.message),1)])])])])])):c("",!0)],8,R))),128))])]),g(w,{active:s.isLoading},null,8,["active"])])}const Yt=v(L,[["render",Jt]]);export{Yt as default};
