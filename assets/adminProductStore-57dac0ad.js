import{l as u,p as d}from"./index-75005144.js";import{t as c}from"./toastStore-24da0ea0.js";const a=c(),r=u("adminProductStore",{state:()=>({products:{},isLoading:!1}),actions:{getProducts(){const s="https://vue3-course-api.hexschool.io/api/hexvuemm/admin/products/all";this.isLoading=!0,d.get(s).then(t=>{this.products=t.data.products,this.isLoading=!1}).catch(t=>{this.isLoading=!1,t.request.status===404&&a.pushMsg({style:"danger",title:"商品取得失敗",content:"出現系統問題"})})},deleteProduct(s){const t=`https://vue3-course-api.hexschool.io/api/hexvuemm/admin/product/${s}`;this.isLoading=!0,d.delete(t).then(e=>{this.isLoading=!1,e.data.success?(this.getProducts(),a.pushMsg({style:"primary",title:"成功刪除商品"})):a.pushMsg({style:"danger",title:"刪除商品失敗",content:e.data.message})}).catch(e=>{this.isLoading=!1,e.request.status===404&&a.pushMsg({style:"danger",title:"商品刪除失敗",content:"出現系統問題"})})},updateProduct(s){let t="https://vue3-course-api.hexschool.io/api/hexvuemm/admin/product",e="post",o="新增";this.isLoading=!0,s.id!==void 0&&(t+=`/${s.id}`,e="put",o="更新"),d[e](t,{data:s}).then(i=>{this.isLoading=!1,i.data.success?(this.getProducts(),a.pushMsg({style:"success",title:`成功${o}商品`})):a.pushMsg({style:"danger",title:`${o}商品失敗`,content:i.data.message})}).catch(i=>{this.isLoading=!1,i.request.status===404&&a.pushMsg({style:"danger",title:"商品更新失敗",content:"出現系統問題"})})},switchEnable(s){const t={...s};t.is_enabled=!t.is_enabled,this.updateProduct(t)}},getters:{productsTotal(){return Object.keys(this.products).length}}});export{r as a};
