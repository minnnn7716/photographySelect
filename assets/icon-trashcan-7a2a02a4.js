import{l as p,p as o,m as h,_ as y,o as b,c as _,a as i,t as u,b as m}from"./index-8558fa27.js";import{a as x}from"./adminProductStore-143ddc0f.js";import{t as g}from"./toastStore-57ead6d4.js";import{m as v}from"./modalMixin-b8f36e48.js";const r=g(),$=p("adminOrderStore",{state:()=>({orders:{},pagination:{},isLoading:!1}),actions:{getOrders(){const t="https://vue3-course-api.hexschool.io/api/hexvuemm/admin/orders?page=:page";this.isLoading=!0,o.get(t).then(e=>{this.orders=e.data.orders,this.pagination=e.data.pagination,this.isLoading=!1}).catch(()=>{this.isLoading=!1,r.pushMsg({style:"danger",title:"訂單取得失敗",content:"出現系統問題"})})},deleteOrder(t){const e=`https://vue3-course-api.hexschool.io/api/hexvuemm/admin/order/${t}`;this.isLoading=!0,o.delete(e).then(s=>{this.isLoading=!1,s.data.success?(this.getOrders(),r.pushMsg({style:"primary",title:"成功刪除訂單"})):r.pushMsg({style:"danger",title:"刪除訂單失敗",content:s.data.message})}).catch(()=>{this.isLoading=!1,r.pushMsg({style:"danger",title:"訂單刪除失敗",content:"出現系統問題"})})}},getters:{orderTotalPrice(){let t=0;return Object.keys(this.orders).length&&(t=this.orders.map(e=>e.total).reduce((e,s)=>e+s,0)),t},orderNum(){let t=0;return Object.keys(this.orders).length&&(t=this.orders.length),t}}}),n=g(),L=p("couponStore",{state:()=>({coupons:[],pagination:{},isLoading:!1}),actions:{getCoupons(){const t="https://vue3-course-api.hexschool.io/api/hexvuemm/admin/coupons?page=:page";this.isLoading=!0,o.get(t).then(e=>{this.coupons=this.convertEnabled(e.data.coupons),this.pagination=e.data.pagination,this.isLoading=!1}).catch(()=>{n.pushMsg({style:"danger",title:"折價券取得失敗",content:"出現系統問題"})})},updatedCoupon(t){let e="https://vue3-course-api.hexschool.io/api/hexvuemm/admin/coupon",s="post",a="新增";this.isLoading=!0,t.id!==void 0&&(e+=`/${t.id}`,s="put",a="更新"),o[s](e,{data:t}).then(l=>{this.isLoading=!1,l.data.success?(this.getCoupons(),n.pushMsg({style:"success",title:`成功${a}折價券`})):n.pushMsg({style:"danger",title:`${a}折價券失敗`,content:l.data.message})}).catch(()=>{n.pushMsg({style:"danger",title:"折價券更新失敗",content:"抱歉，出現系統問題，請聯絡我們！"})})},deleteCoupon(t){const e=`https://vue3-course-api.hexschool.io/api/hexvuemm/admin/coupon/${t}`;this.isLoading=!0,o.delete(e).then(s=>{this.isLoading=!1,s.data.success?(this.getCoupons(),n.pushMsg({style:"primary",title:"成功刪除折價券"})):n.pushMsg({style:"danger",title:"刪除折價券失敗",content:s.data.message})}).catch(()=>{n.pushMsg({style:"danger",title:"折價券更新失敗",content:"出現系統問題"})})},convertEnabled(t){const e=[...t];return e.forEach(s=>{const a=s;a.is_enabled=!!s.is_enabled}),e}}}),d=g(),M=p("adminNewsStore",{state:()=>({news:{},pagination:{},isLoading:!1}),actions:{getNews(){const t="https://vue3-course-api.hexschool.io/api/hexvuemm/admin/articles?page=:page";this.isLoading=!0,o.get(t).then(e=>{this.news=e.data.articles,this.pagination=e.data.pagination,this.isLoading=!1}).catch(()=>{this.isLoading=!1,d.pushMsg({style:"danger",title:"消息取得失敗",content:"出現系統問題"})})},updateNews(t){let e="https://vue3-course-api.hexschool.io/api/hexvuemm/admin/article",s="post",a="新增";this.isLoading=!0,t.id!==void 0&&(e+=`/${t.id}`,s="put",a="更新"),o[s](e,{data:t}).then(l=>{this.isLoading=!1,l.data.success?(this.getNews(),d.pushMsg({style:"success",title:`成功${a}消息`})):d.pushMsg({style:"danger",title:`${a}消息失敗`,content:l.data.message})}).catch(()=>{this.isLoading=!1,d.pushMsg({style:"danger",title:"消息更新失敗",content:"出現系統問題"})})},deleteNews(t){const e=`https://vue3-course-api.hexschool.io/api/hexvuemm/admin/article/${t}`;this.isLoading=!0,o.delete(e).then(s=>{this.isLoading=!1,s.data.success?(this.getNews(),d.pushMsg({style:"primary",title:"成功刪除消息"})):d.pushMsg({style:"danger",title:"刪除消息失敗",content:s.data.message})}).catch(()=>{this.isLoading=!1,d.pushMsg({style:"danger",title:"消息刪除失敗",content:"出現系統問題"})})},switchPublic(t){const e={...t};e.content=e.title,e.isPublic=!e.isPublic,this.updateNews(e)}},getters:{newsNum(){let t=0;return Object.keys(this.news).length&&(t=this.news.length),t}}}),w={data(){return{modal:""}},props:{deleteData:{type:Object,default(){return{}}}},mixins:[v],methods:{...h(x,["deleteProduct"]),...h($,["deleteOrder"]),...h(L,["deleteCoupon"]),...h(M,["deleteNews"]),deleteAction(){const t=`delete${this.deleteData.source}`;this[t](this.deleteData.id),this.modal.hide()}},computed:{source(){let t="";const{source:e}=this.deleteData;return e==="Product"?t="商品":e==="Order"?t="訂單":e==="Coupon"?t="折價券":e==="News"?t="消息":t="",t}}},N={class:"modal fade",id:"deleteModal",tabindex:"-1",ref:"modal"},O={class:"modal-dialog modal-dialog-centered"},S={class:"modal-content"},D={class:"modal-header bg-danger-700 text-white"},C={class:"modal-title fs-5",id:"deleteModal"},P=i("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1),k={class:"modal-body text-center py-10"},j={class:"fw-medium text-danger-800"},A={class:"modal-footer bg-gray-200"},B=i("button",{type:"button",class:"btn btn-outline-danger-900 px-10 me-4","data-bs-dismiss":"modal"}," 取消 ",-1);function E(t,e,s,a,l,c){return b(),_("div",N,[i("div",O,[i("div",S,[i("div",D,[i("h2",C,"刪除"+u(c.source),1),P]),i("div",k,[m(" 確定要刪除"+u(c.source)+" ",1),i("span",j," 「"+u(s.deleteData.title!==void 0?s.deleteData.title:s.deleteData.id)+"」",1),m("嗎？ ")]),i("div",A,[B,i("button",{type:"button",class:"btn btn-danger-900 px-10",onClick:e[0]||(e[0]=(...f)=>c.deleteAction&&c.deleteAction(...f))}," 確定 ")])])])],512)}const F=y(w,[["render",E]]),G="/photographySelect/assets/icon-trashcan-c8b2b423.svg";export{F as D,G as _,$ as a,M as b,L as c};
